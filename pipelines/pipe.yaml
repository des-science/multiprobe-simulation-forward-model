# datavectors
- name: fiducial_dv
  cmd: esub msfm/apps/run_datavectors.py --simset=fiducial --config=configs/config.yaml --dir_in=/cluster/scratch/athomsen/CosmoGrid/fiducial --dir_out=/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/fiducial --mode=jobarray --function=all --n_jobs=1 --tasks="0" --job_name=dv_fidu --system=slurm --main_time=24

- name: perturbations_dv
  cmd: esub msfm/apps/run_datavectors.py --simset=fiducial --config=configs/config.yaml --dir_in=/cluster/scratch/athomsen/CosmoGrid/fiducial --dir_out=/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/fiducial --mode=jobarray --function=all --n_jobs=12 --tasks="1>13" --job_name=dv_pert --system=slurm

- name: grid_dv
  cmd: esub msfm/apps/run_datavectors.py --simset=grid --config=configs/config.yaml --dir_in=/cluster/scratch/athomsen/CosmoGrid/grid --dir_out=/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/grid --mode=jobarray --function=all --n_jobs=2500 --tasks="0>2500" --job_name=dv_grid --system=slurm

# .tfrecord
- name: fiducial_tfr
  dep: fiducial_dv
  cmd: esub msfm/apps/run_fiducial_tfrecords.py --n_files=200 --config=configs/config.yaml --dir_in=/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/fiducial --dir_out=/cluster/scratch/athomsen/CosmoGrid/v4/tfrecords/fiducial --mode=jobarray --function=all --n_jobs=200 --tasks="0>200" --job_name=tfr_fidu --system=slurm

- name: grid_tfr
  dep: grid_dv
  cmd: esub msfm/apps/run_grid_tfrecords.py --n_files=250 --config=configs/config.yaml --dir_in=/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/grid --dir_out=/cluster/scratch/athomsen/CosmoGrid/v4/tfrecords/grid --mode=jobarray --function=all --n_jobs=250 --tasks="0>250" --job_name=tfr_grid --system=slurm

# power spectra
- name: fiducial_ps
  cmd: esub msfm/apps/run_power_spectra.py --simset=fiducial --config=configs/config.yaml --tfr_pattern="/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/large_scales/tfrecords/DESy3_fiducial_???.tfrecord" --dir_out=/cluster/scratch/athomsen/CosmoGrid/v4/large_scales/cls --mode=jobarray --function=all --job_name=cls_fidu --system=slurm --debug

- name: grid_ps
  cmd: esub msfm/apps/run_power_spectra.py --simset=grid --config=configs/config.yaml --tfr_pattern="/cluster/work/refregier/athomsen/CosmoGrid/DESY3/v4/large_scales/tfrecords/DESy3_grid_???.tfrecord" --dir_out=/cluster/scratch/athomsen/CosmoGrid/v4/large_scales/cls --mode=jobarray --function=all --job_name=cls_grid --system=slurm
